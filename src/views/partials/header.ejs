<header class="site-header">
  <nav class="nav container" aria-label="Primary">

    <!-- Logo (izquierda) -->
    <a href="/" class="brand" aria-label="LYN AutoSales">
      <img class="brand__logo" src="/images/lyn-logo.svg" alt="LYN AutoSales">
    </a>

    <!-- Spacer flexible para empujar el resto a la derecha -->
    <div class="nav__spacer"></div>

    <!-- Menú + idioma + login (derecha) -->
    <div class="nav__right">
      <ul class="nav__links" role="menu">
        <li><a href="/inventory"><%= __('menu.inventory') %></a></li>
        <li><a href="/about"><%= __('menu.about') %></a></li>
        <li><a href="/contact"><%= __('menu.contact') %></a></li>
      </ul>

      <!-- Botón de idioma con 1 clic -->
      <form action="/toggle-lng" method="post" class="lang" aria-label="Language">
        <button type="submit" class="lang__btn" title="<%= locale === 'es' ? 'Cambiar a EN' : 'Switch to ES' %>">
          <%= (locale || 'es').toUpperCase() %>
        </button>
      </form>

      <a href="/auth/login" class="btn btn--icon" aria-label="<%= __('menu.login') %>">
        <svg width="22" height="22" viewBox="0 0 24 24">
          <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-5 0-9 2.5-9 5.5V22h18v-2.5C21 16.5 17 14 12 14Z" fill="currentColor"/>
        </svg>
      </a>

      <!-- Hamburguesa solo móvil -->
      <button id="navToggle" class="nav__toggle" aria-expanded="false" aria-controls="navMenu" aria-label="Menu">
        <svg width="24" height="24" viewBox="0 0 24 24"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
      </button>
    </div>
  </nav>

  <div id="navOverlay" class="nav__overlay" hidden></div>
</header>

<script>
(function(){
  const toggle = document.getElementById('navToggle');
  const right  = document.querySelector('.nav__right');
  const overlay = document.getElementById('navOverlay');

  function openMenu(open){
    document.body.classList.toggle('no-scroll', open);
    right.classList.toggle('is-open', open);
    overlay.hidden = !open;
    toggle?.setAttribute('aria-expanded', open ? 'true' : 'false');
  }

  toggle?.addEventListener('click', ()=> openMenu(!right.classList.contains('is-open')));
  overlay?.addEventListener('click', ()=> openMenu(false));
  document.addEventListener('keydown', e=>{ if(e.key==='Escape') openMenu(false); });
})();
</script>
